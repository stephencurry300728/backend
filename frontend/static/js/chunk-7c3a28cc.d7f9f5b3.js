(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c3a28cc"],{"07ac":function(e,t,n){var i=n("23e7"),a=n("6f53").values;i({target:"Object",stat:!0},{values:function(e){return a(e)}})},"08d8":function(e,t,n){},"13d5":function(e,t,n){"use strict";var i=n("23e7"),a=n("d58f").left,s=n("a640"),r=n("ae40"),o=s("reduce"),c=r("reduce",{1:0});i({target:"Array",proto:!0,forced:!o||!c},{reduce:function(e){return a(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"34b7":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n("b775");function a(e){return Object(i["a"])({url:"/save-classification/",method:"post",data:e})}function s(){return Object(i["a"])({url:"/data-categories/",method:"get"})}},"466d":function(e,t,n){"use strict";var i=n("d784"),a=n("825a"),s=n("50c4"),r=n("1d80"),o=n("8aa5"),c=n("14c3");i("match",1,(function(e,t,n){return[function(t){var n=r(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var r=a(e),u=String(this);if(!r.global)return c(r,u);var l=r.unicode;r.lastIndex=0;var f,d=[],v=0;while(null!==(f=c(r,u))){var h=String(f[0]);d[v]=h,""===h&&(r.lastIndex=o(u,s(r.lastIndex),l)),v++}return 0===v?null:d}]}))},"4e82":function(e,t,n){"use strict";var i=n("23e7"),a=n("1c0b"),s=n("7b0b"),r=n("d039"),o=n("a640"),c=[],u=c.sort,l=r((function(){c.sort(void 0)})),f=r((function(){c.sort(null)})),d=o("sort"),v=l||!f||!d;i({target:"Array",proto:!0,forced:v},{sort:function(e){return void 0===e?u.call(s(this)):u.call(s(this),a(e))}})},"4fad":function(e,t,n){var i=n("23e7"),a=n("6f53").entries;i({target:"Object",stat:!0},{entries:function(e){return a(e)}})},6062:function(e,t,n){"use strict";var i=n("6d61"),a=n("6566");e.exports=i("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},"61c2":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"classification-container"},[n("h2",{staticStyle:{"text-align":"center"}},[e._v("步骤归类")]),n("div",{staticClass:"file-names-container"},e._l(e.uniqueFileNames,(function(t){return n("div",{key:t,staticClass:"file-name-item",on:{click:function(n){return e.selectFileName(t)}}},[n("i",{staticClass:"el-icon-files"}),n("h3",[e._v(e._s(t))])])})),0),e.showNoDataMessage?n("div",{staticClass:"no-data"},[e._v("无数据")]):e._e(),e.selectedFileName?n("div",{staticClass:"additional-data-container"},[n("h3",[e._v("为文件名 "+e._s(e.selectedFileName)+" 的操作分类:")]),n("div",{staticClass:"data-container"},e._l(Object.keys(e.selectedAdditionalData),(function(t){return n("div",{key:t,staticClass:"data-item"},[n("div",[e._v(e._s(t))]),n("el-select",{attrs:{clearable:"",placeholder:"请选择分类"},model:{value:e.classifications[t],callback:function(n){e.$set(e.classifications,t,n)},expression:"classifications[key]"}},[n("el-option",{attrs:{label:"识故问题",value:"识故问题"}}),n("el-option",{attrs:{label:"操作问题",value:"操作问题"}}),n("el-option",{attrs:{label:"安全问题",value:"安全问题"}})],1)],1)})),0),n("div",{staticClass:"button-container"},[n("el-button",{attrs:{type:"primary",disabled:!e.isAllClassified,loading:e.loading,size:"big"},on:{click:e.saveClassifications}},[e._v(" 保存分类 "),n("i",{staticClass:"el-icon-check el-icon--right"})])],1)]):e._e()])},a=[],s=n("3835"),r=n("c7eb"),o=n("1da1"),c=(n("7db0"),n("a630"),n("d81d"),n("13d5"),n("fb6a"),n("4e82"),n("4fad"),n("b64b"),n("d3b7"),n("07ac"),n("ac1f"),n("6062"),n("3ca3"),n("466d"),n("159b"),n("ddb0"),n("ad8f")),u=n("34b7"),l=n("323e"),f=n.n(l),d=(n("a5d8"),{name:"AssessmentClassification",data:function(){return{assessments:[],uniqueFileNames:[],selectedFileName:"",selectedAdditionalData:{},classifications:{},loading:!1,dataCategories:{},showNoDataMessage:!1,noDataTimer:null}},mounted:function(){var e=this;this.fetchAllData(),this.fetchDataCategories(),this.noDataTimer=setTimeout((function(){0===e.uniqueFileNames.length&&(e.showNoDataMessage=!0)}),2e3)},beforeDestroy:function(){this.noDataTimer&&clearTimeout(this.noDataTimer)},computed:{isAllClassified:function(){return Object.values(this.classifications).every((function(e){return""!==e}))}},methods:{fetchAllData:function(){var e=this;Object(c["a"])().then((function(t){e.assessments=t.data,e.extractUniqueFileNames()})).catch((function(e){console.error("Error fetching data: ",e)}))},fetchDataCategories:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var n,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u["b"])();case 3:n=t.sent,i=n.data,e.dataCategories=i.reduce((function(e,t){return e[t.file_name]=t.classifications,e}),{}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("Error fetching data categories: ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},extractUniqueFileNames:function(){var e=new Set(this.assessments.map((function(e){return e.file_name})));this.uniqueFileNames=Array.from(e).sort((function(e,t){var n=e.match(/(\d+)([a-zA-Z]+)(\d*)/),i=t.match(/(\d+)([a-zA-Z]+)(\d*)/),a=parseInt(n[1],10),s=parseInt(i[1],10);if(a!==s)return a-s;if(n[2]!==i[2])return n[2].localeCompare(i[2]);var r=n[3]?parseInt(n[3],10):0,o=i[3]?parseInt(i[3],10):0;return r-o}))},selectFileName:function(e){this.selectedFileName=e;var t=this.assessments.find((function(t){return t.file_name===e}));if(t&&t.additional_data){var n=Object.entries(t.additional_data).slice(2);this.selectedAdditionalData=n.reduce((function(e,t){var n=Object(s["a"])(t,2),i=n[0],a=n[1];return e[i]=a,e}),{})}else this.selectedAdditionalData={};this.initializeClassifications(),this.fillClassificationsFromDataCategories()},initializeClassifications:function(){var e=this;this.classifications={},Object.keys(this.selectedAdditionalData).forEach((function(t){e.$set(e.classifications,t,"")}))},fillClassificationsFromDataCategories:function(){var e=this;if(this.dataCategories[this.selectedFileName]){var t=this.dataCategories[this.selectedFileName];Object.keys(this.selectedAdditionalData).forEach((function(n){t[n]&&(e.classifications[n]=t[n])}))}},saveClassifications:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isAllClassified){t.next=3;break}return e.$message.error({message:"所有字段都必须分类，请完成分类后再保存。",duration:2e3,showClose:!0}),t.abrupt("return");case 3:return e.loading=!0,f.a.start(),t.prev=5,t.next=8,Object(u["a"])({file_name:e.selectedFileName,classifications:e.classifications});case 8:e.$message({type:"success",message:"分类信息已保存",duration:2e3,showClose:!0}),window.location.reload(),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](5),console.error("Error saving classifications: ",t.t0),e.$message.error({message:"保存分类信息失败，请重试。",duration:2e3,showClose:!0});case 16:return t.prev=16,e.loading=!1,f.a.done(),t.finish(16);case 20:case"end":return t.stop()}}),t,null,[[5,12,16,20]])})))()}}}),v=d,h=(n("e213"),n("2877")),b=Object(h["a"])(v,i,a,!1,null,"268c0c7e",null);t["default"]=b.exports},6566:function(e,t,n){"use strict";var i=n("9bf2").f,a=n("7c73"),s=n("e2cc"),r=n("0366"),o=n("19aa"),c=n("2266"),u=n("7dd0"),l=n("2626"),f=n("83ab"),d=n("f183").fastKey,v=n("69f3"),h=v.set,b=v.getterFor;e.exports={getConstructor:function(e,t,n,u){var l=e((function(e,i){o(e,l,t),h(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),f||(e.size=0),void 0!=i&&c(i,e[u],e,n)})),v=b(t),m=function(e,t,n){var i,a,s=v(e),r=p(e,t);return r?r.value=n:(s.last=r={index:a=d(t,!0),key:t,value:n,previous:i=s.last,next:void 0,removed:!1},s.first||(s.first=r),i&&(i.next=r),f?s.size++:e.size++,"F"!==a&&(s.index[a]=r)),e},p=function(e,t){var n,i=v(e),a=d(t);if("F"!==a)return i.index[a];for(n=i.first;n;n=n.next)if(n.key==t)return n};return s(l.prototype,{clear:function(){var e=this,t=v(e),n=t.index,i=t.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete n[i.index],i=i.next;t.first=t.last=void 0,f?t.size=0:e.size=0},delete:function(e){var t=this,n=v(t),i=p(t,e);if(i){var a=i.next,s=i.previous;delete n.index[i.index],i.removed=!0,s&&(s.next=a),a&&(a.previous=s),n.first==i&&(n.first=a),n.last==i&&(n.last=s),f?n.size--:t.size--}return!!i},forEach:function(e){var t,n=v(this),i=r(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:n.first){i(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!p(this,e)}}),s(l.prototype,n?{get:function(e){var t=p(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),f&&i(l.prototype,"size",{get:function(){return v(this).size}}),l},setStrong:function(e,t,n){var i=t+" Iterator",a=b(t),s=b(i);u(e,t,(function(e,t){h(this,{type:i,target:e,state:a(e),kind:t,last:void 0})}),(function(){var e=s(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},"6d61":function(e,t,n){"use strict";var i=n("23e7"),a=n("da84"),s=n("94ca"),r=n("6eeb"),o=n("f183"),c=n("2266"),u=n("19aa"),l=n("861d"),f=n("d039"),d=n("1c7e"),v=n("d44e"),h=n("7156");e.exports=function(e,t,n){var b=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),p=b?"set":"add",g=a[e],x=g&&g.prototype,w=g,y={},C=function(e){var t=x[e];r(x,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(s(e,"function"!=typeof g||!(m||x.forEach&&!f((function(){(new g).entries().next()})))))w=n.getConstructor(t,e,b,p),o.REQUIRED=!0;else if(s(e,!0)){var O=new w,j=O[p](m?{}:-0,1)!=O,k=f((function(){O.has(1)})),D=d((function(e){new g(e)})),F=!m&&f((function(){var e=new g,t=5;while(t--)e[p](t,t);return!e.has(-0)}));D||(w=t((function(t,n){u(t,w,e);var i=h(new g,t,w);return void 0!=n&&c(n,i[p],i,b),i})),w.prototype=x,x.constructor=w),(k||F)&&(C("delete"),C("has"),b&&C("get")),(F||j)&&C(p),m&&x.clear&&delete x.clear}return y[e]=w,i({global:!0,forced:w!=g},y),v(w,e),m||n.setStrong(w,e,b),w}},"6f53":function(e,t,n){var i=n("83ab"),a=n("df75"),s=n("fc6a"),r=n("d1e7").f,o=function(e){return function(t){var n,o=s(t),c=a(o),u=c.length,l=0,f=[];while(u>l)n=c[l++],i&&!r.call(o,n)||f.push(e?[n,o[n]]:o[n]);return f}};e.exports={entries:o(!0),values:o(!1)}},"7db0":function(e,t,n){"use strict";var i=n("23e7"),a=n("b727").find,s=n("44d2"),r=n("ae40"),o="find",c=!0,u=r(o);o in[]&&Array(1)[o]((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!u},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),s(o)},ad8f:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u}));var i=n("b775");function a(e){return Object(i["a"])({url:"/assessment-base/",method:"get",params:e})}function s(e){return Object(i["a"])({url:"/assessment-base/".concat(e,"/"),method:"get"})}function r(e,t){return Object(i["a"])({url:"/assessment-base/".concat(e,"/"),method:"patch",data:t})}function o(e){return Object(i["a"])({url:"/assessment-base/".concat(e,"/"),method:"delete"})}function c(){return Object(i["a"])({url:"/assessment-base/all-train-and-assessment/",method:"get"})}function u(e){return Object(i["a"])({url:"/assessment-base/unpaged-data/",method:"get",params:e})}},bb2f:function(e,t,n){var i=n("d039");e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d58f:function(e,t,n){var i=n("1c0b"),a=n("7b0b"),s=n("44ad"),r=n("50c4"),o=function(e){return function(t,n,o,c){i(n);var u=a(t),l=s(u),f=r(u.length),d=e?f-1:0,v=e?-1:1;if(o<2)while(1){if(d in l){c=l[d],d+=v;break}if(d+=v,e?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:f>d;d+=v)d in l&&(c=n(c,l[d],d,u));return c}};e.exports={left:o(!1),right:o(!0)}},e213:function(e,t,n){"use strict";n("08d8")},f183:function(e,t,n){var i=n("d012"),a=n("861d"),s=n("5135"),r=n("9bf2").f,o=n("90e3"),c=n("bb2f"),u=o("meta"),l=0,f=Object.isExtensible||function(){return!0},d=function(e){r(e,u,{value:{objectID:"O"+ ++l,weakData:{}}})},v=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,u)){if(!f(e))return"F";if(!t)return"E";d(e)}return e[u].objectID},h=function(e,t){if(!s(e,u)){if(!f(e))return!0;if(!t)return!1;d(e)}return e[u].weakData},b=function(e){return c&&m.REQUIRED&&f(e)&&!s(e,u)&&d(e),e},m=e.exports={REQUIRED:!1,fastKey:v,getWeakData:h,onFreeze:b};i[u]=!0}}]);